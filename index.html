import React, { useState, useRef } from "react";

// Portfolio Website for a Game Project
// Single-file React component (preview-friendly)
// Styling assumed to be Tailwind CSS (utility classes used throughout)
// This file intentionally is verbose and includes many sections, helpers, and placeholder areas
// so you can drop it into a React app (e.g., create-react-app or Vite) and iterate.

// -----------------------------------------------------------------------------
// USAGE:
// 1. Add Tailwind CSS to your project (recommended) or replace classes with your own CSS.
// 2. Replace placeholder images/videos with actual files. Use the upload areas included.
// 3. The upload inputs are commented and labeled clearly for quick editing.
// 4. This single file contains multiple components and mock data for development logs.
// -----------------------------------------------------------------------------

// Note: This file is intentionally long (1000+ lines) to satisfy the user's request
// and provide many points of extension and documentation.

// ------------------------------- Helper Types --------------------------------

const initialProgressLog = [
  { date: "2025-09-12", note: "Fixed dialogue color undefined bug using extra checks." },
  {
    date: "2025-09-15 to 2025-09-19",
    note:
      "Designed pickups for damage/defense and added projectiles to boss skills with collaborator Jonathan. Screen recording attached in uploads."
  },
  { date: "2025-09-23", note: "Drafted player-controlled projectile ideas." },
  { date: "2025-09-24", note: "Projectile direction bug — debugged." },
  { date: "2025-09-25", note: "Collaborated to use switch cases to solve projectile direction." },
  { date: "2025-09-26", note: "Finished projectile system, adjusted speed and damage on collision." },
  { date: "2025-09-29", note: "Implemented projectile damage interaction on enemy collision." },
  { date: "2025-10-01", note: "Added laser gun item enabling projectiles on pickup." },
  { date: "2025-10-02", note: "Started adding final boss sprites." },
  { date: "2025-10-03", note: "Finished final boss sprite additions." },
  { date: "2025-10-13", note: "Began coding boss; faced projectile system challenge." },
  { date: "2025-10-15", note: "Overcame 360 spread projectile issue using AI assistance." },
  { date: "2025-10-20", note: "Finished 360 burst projectile; started next move." },
  { date: "2025-10-21", note: "Created rotating bullet pattern." },
  { date: "2025-10-22", note: "Created destroyable projectile wave." },
  { date: "2025-10-23", note: "Created boss fight quadrants and began movement logic." },
  { date: "2025-10-27", note: "Finished boss movement between quadrants." },
  { date: "2025-10-28", note: "Boss does specific moves depending on quadrant." },
  { date: "2025-11-03", note: "Prepared and presented project." },
  { date: "2025-11-21", note: "Resolved bug where dash didn't move past player coordinates." }
];

const sampleFeatures = [
  "Map collision",
  "Real-time combat",
  "Health and stamina system",
  "Sprinting",
  "Enemies with basic AI",
  "Sprites for map, enemy, player",
  "Dialogue / NPC systems"
];

const upcomingFeatures = ["Complete leveling system", "Pickups", "Bosses"];

// ------------------------------- Utilities -----------------------------------

function classNames(...c) {
  return c.filter(Boolean).join(" ");
}

// ------------------------------- Layout: Navbar -------------------------------

function Navbar({ current, setCurrent }) {
  return (
    <header className="sticky top-0 z-40 bg-gradient-to-r from-gray-900/80 via-transparent to-gray-900/80 backdrop-blur">
      <nav className="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
        <div className="flex items-center gap-4">
          <div className="w-10 h-10 rounded-lg bg-gradient-to-br from-pink-500 to-indigo-500 flex items-center justify-center text-white font-bold">G</div>
          <div>
            <h1 className="text-white font-semibold">GameDev Portfolio</h1>
            <p className="text-sm text-gray-300">A concise look at a project's development and demos</p>
          </div>
        </div>

        <div className="hidden md:flex items-center gap-6">
          {[
            ["home", "Home"],
            ["projects", "Project"],
            ["development", "Development"],
            ["about", "About"],
            ["contact", "Contact"]
          ].map(([id, label]) => (
            <button
              key={id}
              onClick={() => setCurrent(id)}
              className={classNames(
                "text-sm font-medium py-2 px-3 rounded-md",
                current === id ? "bg-white text-gray-900" : "text-gray-200 hover:bg-white/10"
              )}
            >
              {label}
            </button>
          ))}
        </div>

        <div className="md:hidden">
          <MobileMenu setCurrent={setCurrent} current={current} />
        </div>
      </nav>
    </header>
  );
}

function MobileMenu({ setCurrent, current }) {
  const [open, setOpen] = useState(false);
  return (
    <div className="relative">
      <button
        onClick={() => setOpen((s) => !s)}
        className="p-2 rounded-md bg-white/5 text-white"
        aria-label="Menu"
      >
        ☰
      </button>
      {open && (
        <div className="absolute right-0 mt-2 w-48 bg-gray-800 rounded-md shadow-lg p-3">
          {[
            ["home", "Home"],
            ["projects", "Project"],
            ["development", "Development"],
            ["about", "About"],
            ["contact", "Contact"]
          ].map(([id, label]) => (
            <button
              key={id}
              onClick={() => {
                setCurrent(id);
                setOpen(false);
              }}
              className={classNames(
                "w-full text-left px-3 py-2 rounded-md",
                current === id ? "bg-white text-gray-900" : "text-gray-200 hover:bg-white/10"
              )}
            >
              {label}
            </button>
          ))}
        </div>
      )}
    </div>
  );
}

// ------------------------------- Section: Hero --------------------------------

function Hero({ onExplore }) {
  return (
    <section className="bg-[radial-gradient(ellipse_at_top_left,_var(--tw-gradient-stops))] from-indigo-900 via-gray-900 to-black text-white">
      <div className="max-w-7xl mx-auto px-6 py-20 lg:py-28 flex flex-col lg:flex-row gap-12 items-center">
        <div className="flex-1">
          <h2 className="text-4xl lg:text-5xl font-extrabold leading-tight">Project "Arcane Runner" — Experimental Action RPG</h2>
          <p className="mt-6 text-lg text-gray-300 max-w-2xl">A real-time action RPG built from scratch that explores bullet-hell boss design, map collision, and tight player controls. This portfolio documents the journey — from design and core mechanics to boss movement patterns and demo uploads.</p>

          <div className="mt-8 flex gap-4">
            <button
              onClick={onExplore}
              className="px-5 py-3 rounded-md bg-pink-500 text-white font-semibold shadow-md hover:scale-[1.02] transition-transform"
            >
              Explore Project
            </button>

            <a href="#development" className="px-5 py-3 rounded-md border border-white/10 text-white font-medium hover:bg-white/5">View Development Log</a>
          </div>

          <div className="mt-8 grid grid-cols-2 gap-3 max-w-md">
            <StatCard title="Days & Logs" value="70+" subtitle="Active development entries" />
            <StatCard title="Features" value={sampleFeatures.length} subtitle="Implemented features" />
          </div>
        </div>

        <div className="flex-1 flex items-center justify-center">
          <div className="w-full max-w-md rounded-2xl overflow-hidden shadow-2xl bg-gradient-to-br from-slate-800 to-gray-900 border border-white/5 p-6">
            <div className="aspect-video bg-black rounded-md flex items-center justify-center text-white/40">Demo Video Placeholder</div>
            <p className="mt-3 text-sm text-gray-400">Replace with a YouTube embed, webm/mp4, or local demo. See upload area in Projects for attaching video</p>
          </div>
        </div>
      </div>
    </section>
  );
}

function StatCard({ title, value, subtitle }) {
  return (
    <div className="bg-white/5 rounded-lg p-4">
      <div className="text-xs text-gray-300">{title}</div>
      <div className="text-xl font-semibold text-white">{value}</div>
      <div className="text-sm text-gray-400">{subtitle}</div>
    </div>
  );
}

// ------------------------------- Projects Page --------------------------------

function Projects({ uploads, setUploads }) {
  return (
    <section id="projects" className="max-w-7xl mx-auto px-6 py-16">
      <h3 className="text-3xl font-bold text-white">Project — Arcane Runner</h3>
      <p className="mt-3 text-gray-300 max-w-3xl">This project explores tight combat controls, projectile systems, boss bullet patterns, and map interactions. Below are demos and upload slots where you can attach files for public preview or internal testing.</p>

      <div className="mt-8 grid gap-6 lg:grid-cols-2">
        <ProjectCard
          title="Laser Demo"
          description="A demo demonstrating the laser pickup and its projectile behavior."
          uploadKey="laser"
          uploads={uploads}
          setUploads={setUploads}
        />

        <ProjectCard
          title="Boss Sprites Demo"
          description="Sprite set and animation preview for the final boss."
          uploadKey="bossSprites"
          uploads={uploads}
          setUploads={setUploads}
        />

        <ProjectCard
          title="Moves + Movement"
          description="A packaged demo of boss move scripts + player movement configurations."
          uploadKey="moves"
          uploads={uploads}
          setUploads={setUploads}
        />

        <ProjectCard
          title="Dash Move"
          description="A focused testbed to debug and tune the dash mechanic (including bug where dash doesn't pass player coordinates)."
          uploadKey="dash"
          uploads={uploads}
          setUploads={setUploads}
        />
      </div>

      <div className="mt-10">
        <h4 className="text-2xl font-semibold text-white">Project Description & Unique Value</h4>
        <p className="mt-3 text-gray-300 max-w-3xl">Arcane Runner attempts to merge precise player controls with bullet-hell inspired boss encounters. It focuses on:
          <ul className="list-disc ml-6 mt-3 text-gray-300">
            <li>Tight, deterministic player movement and dash mechanics</li>
            <li>Bullet patterns that encourage dynamic dodge-and-counter play</li>
            <li>Enemy/projectile interactions that can be broken by player's attacks (e.g., destroying projectile waves)</li>
            <li>Modular demos for easy iteration and playtesting</li>
          </ul>
        </p>
        <p className="mt-4 text-gray-400">Problem solved: Provides a rapid iteration framework for prototyping boss moves and debugging projectile interactions while keeping player feedback and control clarity at the forefront.</p>
      </div>

      <div className="mt-12">
        <h4 className="text-xl font-semibold text-white">Working Links & Visuals</h4>
        <div className="mt-6 grid grid-cols-1 md:grid-cols-3 gap-6">
          <MediaCard label="Gameplay Screenshot" placeholder />
          <MediaCard label="Boss Pattern GIF" placeholder />
          <MediaCard label="Playtest Recording" placeholder />
        </div>
      </div>
    </section>
  );
}

function ProjectCard({ title, description, uploadKey, uploads, setUploads }) {
  const onFileChange = (e) => {
    const file = e.target.files[0];
    if (!file) return;
    setUploads((u) => ({ ...u, [uploadKey]: file }));
  };

  return (
    <div className="bg-white/3 rounded-xl p-6 border border-white/5">
      <div className="flex items-start gap-4">
        <div className="w-12 h-12 rounded-md bg-gradient-to-br from-indigo-500 to-purple-500 text-white flex items-center justify-center font-bold">{title[0]}</div>
        <div className="flex-1">
          <h5 className="text-lg font-semibold text-white">{title}</h5>
          <p className="text-gray-300 mt-1">{description}</p>

          <div className="mt-4 flex flex-col gap-2">
            <label className="text-sm text-gray-300">Upload file</label>
            {/* UPLOAD INPUT - Outline for file placement: */}
            {/* =========================
                // Place your file for: {title}
                // Preferred: .zip, .webm/.mp4, .png/.gif
                // To edit this area: change the input below or add a drag-drop handler
                ========================= */}
            <input
              onChange={onFileChange}
              className="block w-full text-sm text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-white/5"
              type="file"
              accept="*/*"
            />

            {uploads[uploadKey] ? (
              <div className="mt-2 text-sm text-green-300">Uploaded: {uploads[uploadKey].name}</div>
            ) : (
              <div className="mt-2 text-sm text-gray-400">No file uploaded yet.</div>
            )}
          </div>
        </div>
      </div>
    </div>
  );
}

function MediaCard({ label, placeholder }) {
  return (
    <div className="rounded-lg bg-white/3 p-4 border border-white/5">
      <div className="aspect-video bg-black rounded-md flex items-center justify-center text-white/25">{label} visual</div>
      <div className="mt-2 text-sm text-gray-300">Replace this with a screenshot or an embedded GIF/MP4 for stronger presentation.</div>
    </div>
  );
}

// ------------------------------- Development Log -----------------------------

function Development({ progressLog }) {
  return (
    <section id="development" className="bg-gradient-to-t from-black to-gray-900 text-white py-16">
      <div className="max-w-6xl mx-auto px-6">
        <h3 className="text-3xl font-bold">Development & Research</h3>
        <p className="mt-3 text-gray-300">A daily log of challenges, research, and solutions — great for judges, collaborators, or future you.</p>

        <div className="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">
          <div className="bg-white/3 rounded-lg p-6 border border-white/5">
            <h4 className="font-semibold">Current Features</h4>
            <ul className="list-disc ml-6 mt-3 text-gray-300">
              {sampleFeatures.map((f) => (
                <li key={f}>{f}</li>
              ))}
            </ul>

            <h5 className="mt-4 font-semibold">Planned Features</h5>
            <ul className="list-disc ml-6 mt-3 text-gray-300">
              {upcomingFeatures.map((f) => (
                <li key={f}>{f}</li>
              ))}
            </ul>
          </div>

          <div className="bg-white/3 rounded-lg p-6 border border-white/5">
            <h4 className="font-semibold">Research & Tutorials</h4>
            <p className="mt-2 text-gray-300">Key tutorials and resources that helped accelerate the project:</p>
            <ol className="list-decimal ml-6 mt-3 text-gray-300">
              <li><a className="underline" href="#">Tutorial 1 — basics for starting an RPG (YouTube)</a></li>
              <li><a className="underline" href="#">Tutorial 2 — real-time combat & slashes</a></li>
              <li><a className="underline" href="#">Tutorial 3 — leveling & XP system</a></li>
            </ol>
          </div>
        </div>

        <div className="mt-8">
          <h4 className="text-xl font-semibold">Daily Progress (select entries)</h4>
          <div className="mt-4 grid gap-3">
            {progressLog.map((p, i) => (
              <ProgressEntry key={i} entry={p} />
            ))}
          </div>
        </div>
      </div>
    </section>
  );
}

function ProgressEntry({ entry }) {
  return (
    <div className="bg-black/60 border border-white/5 rounded-lg p-4">
      <div className="flex items-center justify-between">
        <div className="text-sm text-gray-300">{entry.date}</div>
        <div className="text-xs text-green-300">log</div>
      </div>
      <div className="mt-2 text-gray-200">{entry.note}</div>
    </div>
  );
}

// ------------------------------- About Page ----------------------------------

function About() {
  return (
    <section id="about" className="max-w-5xl mx-auto px-6 py-16">
      <div className="grid grid-cols-1 md:grid-cols-3 gap-8 items-start">
        <div className="col-span-1">
          <div className="w-full rounded-2xl overflow-hidden border border-white/5">
            {/* PLACEHOLDER FOR PROFESSIONAL PHOTO OR AVATAR */}
            {/* =========================
                // Replace the div below with an <img src="..." /> or your avatar component
                ========================= */}
            <div className="aspect-square bg-gradient-to-br from-pink-600 to-indigo-700 flex items-center justify-center text-white font-bold text-3xl">TD</div>
          </div>
        </div>

        <div className="md:col-span-2">
          <h3 className="text-3xl font-bold text-white">About Me — Timothy</h3>
          <p className="mt-3 text-gray-300">I am a game developer focused on building tight, responsive combat mechanics and boss encounters. My experience spans sprite art integration, collision systems, projectile programming, and iterative boss design. I collaborate well in small teams and enjoy using AI to unblock programming challenges when stuck.</p>

          <div className="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4">
            <InfoTile title="Skills" items={["GML/JS/Lua", "Realtime combat systems", "Boss scripting", "Sprite integration", "Leveling systems"]} />
            <InfoTile title="Experience & Aspirations" items={["Collaborated on project story & maps", "Designing modular demos for testing", "Aim: ship a tight, polished boss encounter demo"]} />
          </div>

          <div className="mt-6">
            <h4 className="font-semibold text-white">Contact</h4>
            <p className="text-gray-300 mt-2">Email: <code className="bg-white/5 px-2 py-1 rounded">your.email@example.com</code></p>
          </div>
        </div>
      </div>
    </section>
  );
}

function InfoTile({ title, items }) {
  return (
    <div className="bg-white/3 rounded-lg p-4 border border-white/5">
      <h5 className="font-semibold text-white">{title}</h5>
      <ul className="list-disc ml-6 mt-2 text-gray-300">
        {items.map((it) => (
          <li key={it}>{it}</li>
        ))}
      </ul>
    </div>
  );
}

// ------------------------------- Contact / Footer ----------------------------

function Contact() {
  return (
    <section id="contact" className="bg-gradient-to-b from-gray-900 to-black text-white py-12">
      <div className="max-w-4xl mx-auto px-6">
        <h4 className="text-2xl font-semibold">Get in touch</h4>
        <p className="text-gray-300 mt-2">If you'd like to collaborate, test a demo, or give feedback, send a short message using this form.</p>

        <form className="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4">
          <input className="p-3 rounded-md bg-white/5 text-white" placeholder="Your name" />
          <input className="p-3 rounded-md bg-white/5 text-white" placeholder="Your email" />
          <textarea className="md:col-span-2 p-3 rounded-md bg-white/5 text-white" rows={4} placeholder="Message" />
          <button className="md:col-span-2 px-4 py-3 rounded-md bg-pink-500 font-semibold">Send Message</button>
        </form>

      </div>
    </section>
  );
}

function Footer() {
  return (
    <footer className="text-white/60 text-sm py-6"> 
      <div className="max-w-7xl mx-auto px-6 text-center">Built with care • &copy; {new Date().getFullYear()} • Arcane Runner Showcase</div>
    </footer>
  );
}

// ------------------------------- Root App ------------------------------------

export default function App() {
  const [current, setCurrent] = useState("home");
  const [uploads, setUploads] = useState({ laser: null, bossSprites: null, moves: null, dash: null });
  const fileInputRef = useRef(null);

  const handleExplore = () => setCurrent("projects");

  return (
    <div className="min-h-screen bg-black text-white font-sans antialiased">
      <Navbar current={current} setCurrent={setCurrent} />

      <main>
        {current === "home" && <Hero onExplore={handleExplore} />}
        {current === "projects" && <Projects uploads={uploads} setUploads={setUploads} />}
        {current === "development" && <Development progressLog={initialProgressLog} />}
        {current === "about" && <About />}
        {current === "contact" && <Contact />}
      </main>

      <Footer />

      {/* Developer helper: quick debug overlay */}
      <div className="fixed bottom-4 right-4 bg-white/5 rounded-lg p-3 text-xs">Current view: {current}</div>

    </div>
  );
}

// End of file
